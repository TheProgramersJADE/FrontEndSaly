@inject NavigationManager Navigation
@inject IJSRuntime JS

@inherits LayoutComponentBase

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main class="main-content">
        <div class="top-row">
@*             <a href="https://learn.microsoft.com/aspnet/core/" target="_blank">About</a>
 *@            <button id="btnCerrarSesion" class="btn-logout"  @onclick="CerrarSesion">
                <i class="fas fa-sign-out-alt"></i> Cerrar sesión
            </button>
        </div>

        <article class="content">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui">
    Ocurrió un error inesperado.
    <a href="" class="reload">Recargar</a>
    <a class="dismiss">🗙</a>
</div>

<style>
    /* Layout general */
    .page {
        display: flex;
        min-height: 100vh;
        background-color: #f3f3f3;
    }

    /* Sidebar ya tiene estilo desde NavMenu */
    .sidebar {
        width: 250px;
    }

    /* Contenido principal */
    .main-content {
        flex-grow: 1;
        padding: 10px;
        margin-left: 5px;
        background-color: #fff;
        box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
    }

    /* Barra superior */
    .top-row {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-bottom: 20px;
    }

    /* Botón de cerrar sesión */
    .btn-logout {
        background: linear-gradient(90deg, #7851A9, #B048B5);
        color: #fff;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        font-size: 0.95rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
    }

        .btn-logout:hover {
            background: linear-gradient(90deg, #A880D5, #D471DD);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

    /* Estilo del contenido */
    .content {
        background-color: #fafafa;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* Estilo error UI */
    #blazor-error-ui {
        background: #a94442;
        color: #fff;
        padding: 12px;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        display: none;
    }

        #blazor-error-ui a {
            color: #ffd;
            text-decoration: underline;
            margin-left: 10px;
        }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

@code {
    private async Task CerrarSesion()
    {
        await JS.InvokeVoidAsync("sessionStorage.removeItem", "authToken");
        Navigation.NavigateTo("/", true);
    }
}



@* @inject NavigationManager Navigation
@inject IJSRuntime JS

@inherits LayoutComponentBase

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
@*             <a href="https://learn.microsoft.com/aspnet/core/" target="_blank">About</a>
 *@
          @* <button class="btn btn-outline-danger btn-sm" @onclick="CerrarSesion">Cerrar sesión</button>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code {
    private async Task CerrarSesion()
    {
        // Eliminar el token guardado en el sessionStorage
        await JS.InvokeVoidAsync("sessionStorage.removeItem", "authToken");

        // Redirigir al login
        Navigation.NavigateTo("/", true); // el true hace que recargue completamente la página
    }
}
  *@